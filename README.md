# HIV Testing Services (HTS)

The project backend API is generated by [LoopBack](http://loopback.io) while the frontend was built using [React](https://reactjs.org).

## Requirements
1. Elasticsearch 5.3.2
2. MySQL 5.7
3. Redis
4. Node.js ^8.10.0
5. Git
6. Stable internet connection to install dependencies

## Installation
1. git clone https://github.com/BaobabHealthTrust/htsV2 into suitable directory
2. `cd htsV2` and run `npm install`
3. `cd htsV2/client-src` and run `npm install`
4. `cd htsV2/db` and run `npm install`

## Configure
1. Make copies of each json.example file and rename to .json
2. Replace all configuration parameters in the files with your local configurations

## Initialize
1. `cd db` and run `./seed.js`

## Run
- `cd htsV2/` and run `./start.sh`

## Monitor
- Use the `pm2 monit` command under htsV2/

## Enable app
- To start application on system boot run `pm2 startup` under htsV2/

## Recalibrating
- Recalibrating is needed when a new data dump has been loaded into the app's database
- The recalibrate process updates the reporting database (Elasticsearch) with the new data
- Once a dump has been loaded recalibrating is just `cd htsV2/db` and run `./recalibrate.js`

## License

This library is free software; you can redistribute it and/or modify it under the terms of the GNU Lesser General Public License as published by the Free Software Foundation; either version 2.1 of the License, or (at your option) any later version.

This library is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU Lesser General Public License for more details.

You should have received a copy of the GNU Lesser General Public License along with this library; if not, write to the Free Software Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301  USA.